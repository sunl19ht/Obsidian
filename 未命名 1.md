## 场景：电力监控系统性能问题解决方案讨论

### 开场

**项目经理：** 今天就有一小型的企业单位，因为国产化和信创的运维问题找到我们，我们刚刚已经与我们的客户沟通过了，他们对新上线的国产系统还在磨合阶段，给他们的日常运维带来了较大压力。客户反馈电力监控系统响应非常慢，非常卡。具体的文档我已经下发给大家。

**Devops：** 这个问题咱们不能光凭感觉，要一步一步拆开来看，找到真正的短板。要做到这一点，首先得先搭建一套完善的监控体系，这样我们才能拿到数据，用数据来说话。

**项目经理：** 你说的对，那这部分任务交给SRE工程师怎么样？。

**SRE：** 这个不难，我可以监控系统指标，分析性能原因。

### 安全需求讨论

**网络安全：** 等一下，我这边也有个额外的特殊需求，我发现客户这边没有整套的安全体系，为了防止出其不意的流量，我们必须把安全防护下沉到每个节点上，所以做好防火墙实时状态的监控是及其必要的，SRE工程师，你也可以实现吧？

**SRE：** 没问题，我自定义一个exporter实时的监控防火墙状态。

~~**网络安全：** 另外我还发现客户强调了平台历史沉淀比较多，导致必须要用密码登录，SRE工程师，这个可以可视化吗？而且密码策略很重要，如果做不好会导致弱密码横行，用户可能设置 123456之类的弱密码，极易被暴力破解。另外如果重复使用相同密码，一旦某个平台泄露，其他系统也会跟着沦陷。~~

~~**SRE：** 确实，密码策略这个东西不是数值类型的指标，不是很好监控。~~

~~**项目经理：** 其实我们这个平台已经能够使用AI对系统上的配置文件做收集分析找到其中的问题，不如我继续对这个功能做一下扩展，同时收集一下密码的配置策略，并呈现在最后的报告中。~~

**项目经理：** 但是说回来，系统很卡很慢会不会是有网络攻击？

**网络安全：** 不排除这种可能，但是我觉得还是需要结合服务器实际情况具体分析。

**SRE：** 专门做一次完整的安全分析这个成本实在是太高了，我们是不是可以使用平台自带的LLM工作流分系统方面的报告是不是可行呢？

**项目经理：** 当然可以，我专门调试一下工作流的Prompt，专门分析一下......

**DevOps：** 等一下！我刚刚简单的梳理了一下，我们要进行扩容的服务是电力数据可视化平台，服务的对象是电力数据分析师。也就是说我们的主要业务逻辑是后端提供数据前端进行渲染，如果说之前不卡，现在变卡，那么问题一定出现在后端，或者后端之后的节点上。具体我们就要等到SRE把监控覆盖到平台才能做更具体的分析。

**项目经理：** 那么先请SRE工程师做好监控接入，安全工程师做好平台的边缘节点接入，DevOps工程师那请你先协助各个流程的自动化，做好客户系统性能瓶颈的分析，那么我接下来先对大模型的Prompt为整个团队提供Ai服务。



### 阶段一

**SRE：** 说到监控体系，我想分享一下我们信创智安哨平台在走访数十家企业的过程中积累的经验。我们发现中小企业在安全运维方面确实存在各种各样的问题，于是我们提供了一个高度集成的标准解决方案。

具体而言，客户的各个节点上指标日志数量巨大且杂乱，让非专业IT人员望而却步，摸不着头脑。对此，我们的平台利用node exporter结合wazhu agent构建了一套标准的监控基线，让我们平台可以监控各种操作系统，各个硬件架构，维持我们对基础资源的可观测性。

**运维：** 这个监控基线确实很重要，但就算客户有了这些信息，也依旧难以做到建立出对基础资源的长效观测吧？

**SRE：** 没错，所以我们使用了普罗米修斯结合OpenSearch来做到对性能指标和日志数据的集中收集与管理，来为我们的事件添加上时间维度。

**DevOps工程师：** 现在拥有了统一的指标收集与管理，但是非专业的运维人员面对大量指标与数据，难以结合业务找到其中影响业务连续性的关键信息，这确实是个痛点。

**SRE：** 是的，于是我们在Grafana中建立了标准的可视化模板，以"故障一眼见"为宗旨，使得运维人员无需深厚的技术背景，也能快速识别异常趋势与潜在风险，大幅缩短故障发现时间。

**项目经理：** 这个可视化模板听起来很实用，但有了这些还不够吧？

**SRE：** 确实还不够，我们需要让非专业运维人员在没有专业人员的指导下也具备一定的响应能力，不会面对满屏红色"手忙脚乱"。因此我们使用大模型利用在前两个环节暴露收集的指标和日志，汇总出系统安全报告，在帮助运维的同时，着重提升加强了针对系统健康事件的应急响应能力。

### 信创推进痛点解决

**网络安全：** 这个方案很全面，但我觉得信创的推进可能还会遇到瓶颈。为什么呢？因为大家平时习惯在 Linux 上操作。很多在 Windows 上只要点几下就能搞定的事情，在 Linux 上往往要经过很多步骤，这让没有经验的运维人员觉得很麻烦。

**DevOps工程师：** 为了降低门槛，我们将很多复杂的操作包装成Jenkins job，用户只需要点击就能比在 Windows 上操作得更简单、更高效。也就是说我们不仅解决了 Linux 的操作痛点，使用我们的平台就像把繁琐的手工流程变成一键直达，比在 Windows 上操作更简单、更高效，让信创推进轻松又顺畅。

### 方案总结

**项目经理：** 很好！这样我们就有了一个完整的解决方案。SRE负责监控体系搭建，网络安全负责边缘节点防护，DevOps负责自动化流程，我们的大模型平台负责配置分析和密码策略检查。这样既能解决客户当前的性能问题，又能建立长期的安全运维能力。

**Devops：** 那我们就按照这个方案开始行动吧，先让SRE把监控体系搭建起来，有了数据支撑，我们就能更精准地定位问题所在了。

---

## 技术架构总结

### 核心组件
- **监控基线**：node exporter + wazhu agent
- **数据收集**：Prometheus + OpenSearch
- **可视化**：Grafana标准模板
- **自动化**：Jenkins job
- **AI分析**：大模型配置分析

### 解决的问题
1. 指标日志杂乱无章
2. 缺乏长效观测能力
3. 非专业人员难以理解数据
4. 缺乏应急响应能力
5. Linux操作复杂度高

### 预期效果
- 建立完整的监控体系
- 提升运维效率
- 降低技术门槛
- 增强安全防护
- 实现一键操作
