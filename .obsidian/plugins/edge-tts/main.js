/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var W=Object.create;var T=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var X=Object.getPrototypeOf,Q=Object.prototype.hasOwnProperty;var I=(i,s)=>()=>(s||i((s={exports:{}}).exports,s),s.exports),Y=(i,s)=>{for(var e in s)T(i,e,{get:s[e],enumerable:!0})},k=(i,s,e,t)=>{if(s&&typeof s=="object"||typeof s=="function")for(let n of K(s))!Q.call(i,n)&&n!==e&&T(i,n,{get:()=>s[n],enumerable:!(t=z(s,n))||t.enumerable});return i};var x=(i,s,e)=>(e=i!=null?W(X(i)):{},k(s||!i||!i.__esModule?T(e,"default",{value:i,enumerable:!0}):e,i)),Z=i=>k(T({},"__esModule",{value:!0}),i);var A=I(m=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});m.VOLUME=m.RATE=m.PITCH=m.OUTPUT_FORMAT=void 0;var U;(function(i){i.AUDIO_24KHZ_48KBITRATE_MONO_MP3="audio-24khz-48kbitrate-mono-mp3",i.AUDIO_24KHZ_96KBITRATE_MONO_MP3="audio-24khz-96kbitrate-mono-mp3",i.WEBM_24KHZ_16BIT_MONO_OPUS="webm-24khz-16bit-mono-opus"})(U||(m.OUTPUT_FORMAT=U={}));var D;(function(i){i.X_LOW="x-low",i.LOW="low",i.MEDIUM="medium",i.HIGH="high",i.X_HIGH="x-high",i.DEFAULT="default"})(D||(m.PITCH=D={}));var L;(function(i){i.X_SLOW="x-slow",i.SLOW="slow",i.MEDIUM="medium",i.FAST="fast",i.X_FAST="x-fast",i.DEFAULT="default"})(L||(m.RATE=L={}));var R;(function(i){i.SILENT="silent",i.X_SOFT="x-soft",i.SOFT="soft",i.MEDIUM="medium",i.LOUD="loud",i.X_LOUD="x-LOUD",i.DEFAULT="default"})(R||(m.VOLUME=R={}))});var _=I(b=>{"use strict";var V=b&&b.__awaiter||function(i,s,e,t){function n(a){return a instanceof e?a:new e(function(u){u(a)})}return new(e||(e=Promise))(function(a,u){function c(l){try{r(t.next(l))}catch(f){u(f)}}function d(l){try{r(t.throw(l))}catch(f){u(f)}}function r(l){l.done?a(l.value):n(l.value).then(c,d)}r((t=t.apply(i,s||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0});b.EdgeTTSClient=b.ProsodyOptions=void 0;var $=require("buffer"),J=A();typeof globalThis.Buffer=="undefined"&&(globalThis.Buffer=$.Buffer);function ee(i){let s=new Uint8Array(i);return window.crypto.getRandomValues(s),Array.from(s,e=>`0${e.toString(16)}`.slice(-2)).join("")}var C=class{constructor(){this.eventListeners={data:[],close:[],end:[]}}on(s,e){this.eventListeners[s].push(e)}emit(s,e){this.eventListeners[s].forEach(t=>t(e))}},P=class{constructor(){this.pitch="+0Hz",this.rate=1,this.volume=100}};b.ProsodyOptions=P;var h=class{constructor(s=!1){this.ws=null,this.voice=null,this.voiceLocale=null,this.outputFormat=null,this.requestQueue={},this.connectionStartTime=0,this.enableLogging=s,this.isBrowser=typeof window!="undefined"&&typeof window.document!="undefined"}log(...s){this.enableLogging&&console.log(...s)}sendMessage(s){return V(this,void 0,void 0,function*(){var e,t;for(let n=1;n<=3&&((e=this.ws)===null||e===void 0?void 0:e.readyState)!==WebSocket.OPEN;n++)n===1&&(this.connectionStartTime=Date.now()),this.log(`Connecting... attempt ${n}`),yield this.initWebSocket();(t=this.ws)===null||t===void 0||t.send(s)})}initWebSocket(){this.ws=new WebSocket(h.SYNTH_URL),this.ws.binaryType="arraybuffer";let s=[];return new Promise((e,t)=>{this.ws.onopen=()=>{this.log("Connected in",(Date.now()-this.connectionStartTime)/1e3,"seconds"),this.sendMessage(this.getConfigMessage()).then(e)},this.ws.onmessage=n=>this.handleMessage(n,s),this.ws.onclose=()=>this.handleClose(),this.ws.onerror=n=>t(`Connection Error: ${n}`)})}handleMessage(s,e){var t;let n=$.Buffer.from(s.data),a=n.toString(),u=/X-RequestId:(.*?)\r\n/.exec(a),c=u?u[1]:"";if(a.includes("Path:turn.start"))e.length=0;else if(a.includes("Path:turn.end"))(t=this.requestQueue[c])===null||t===void 0||t.emit("end",e);else if(a.includes("Path:audio"))this.cacheAudioData(n,c);else if(a.includes("Path:audio.metadata")){let d=a.indexOf("{");e.push(JSON.parse(a.slice(d)).Metadata[0])}else this.log("Unknown Message",a)}handleClose(){this.log("Disconnected after:",(Date.now()-this.connectionStartTime)/1e3,"seconds");for(let s in this.requestQueue)this.requestQueue[s].emit("close",null)}cacheAudioData(s,e){var t;let n=new TextEncoder().encode(h.BINARY_DELIM),a=this.findDelimiterIndex(s,n);if(a===-1){this.log("Delimiter not found in the buffer.");return}let u=a+n.length,c=s.slice(u);(t=this.requestQueue[e])===null||t===void 0||t.emit("data",c),this.log("Received audio chunk of size:",c==null?void 0:c.length)}findDelimiterIndex(s,e){for(let t=0;t<=s.length-e.length;t++){let n=!0;for(let a=0;a<e.length;a++)if(s[t+a]!==e[a]){n=!1;break}if(n)return t}return-1}getConfigMessage(){return`Content-Type:application/json; charset=utf-8\r
Path:speech.config\r
\r
{
            "context": {
                "synthesis": {
                    "audio": {
                        "metadataoptions": {
                            "sentenceBoundaryEnabled": "true",
                            "wordBoundaryEnabled": "true"
                        },
                        "outputFormat": "${this.outputFormat}"
                    }
                }
            }
        }`}getVoices(){return fetch(h.VOICES_URL).then(s=>s.json()).catch(s=>Promise.reject(s))}setMetadata(s,e,t){return V(this,void 0,void 0,function*(){if(this.voice=s,this.outputFormat=e,this.voiceLocale=t||this.inferLocaleFromVoiceName(s),!this.voiceLocale)throw new Error("Could not infer voiceLocale from voiceName!");(!this.ws||this.ws.readyState!==WebSocket.OPEN)&&(this.connectionStartTime=Date.now(),yield this.initWebSocket())})}inferLocaleFromVoiceName(s){let e=h.VOICE_LANG_REGEX.exec(s);return e?e[0]:null}close(){var s;(s=this.ws)===null||s===void 0||s.close()}toStream(s,e=new P){return this.sendSSMLRequest(this.buildSSML(s,e))}buildSSML(s,e){return`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xmlns:mstts="https://www.w3.org/2001/mstts" xml:lang="${this.voiceLocale}">
            <voice name="${this.voice}">
                <prosody pitch="${e.pitch}" rate="${e.rate}" volume="${e.volume}">
                    ${s}
                </prosody>
            </voice>
        </speak>`}sendSSMLRequest(s){if(!this.ws)throw new Error("WebSocket not initialized. Call setMetadata first.");let e=ee(16),t=`X-RequestId:${e}\r
Content-Type:application/ssml+xml\r
Path:ssml\r
\r
${s.trim()}`,n=new C;return this.requestQueue[e]=n,this.sendMessage(t).then(),n}};b.EdgeTTSClient=h;h.OUTPUT_FORMAT=J.OUTPUT_FORMAT;h.CLIENT_TOKEN="6A5AA1D4EAFF4E9FB37E23D68491D6F4";h.VOICES_URL=`https://speech.platform.bing.com/consumer/speech/synthesize/readaloud/voices/list?trustedclienttoken=${h.CLIENT_TOKEN}`;h.SYNTH_URL=`wss://speech.platform.bing.com/consumer/speech/synthesize/readaloud/edge/v1?TrustedClientToken=${h.CLIENT_TOKEN}`;h.BINARY_DELIM=`Path:audio\r
`;h.VOICE_LANG_REGEX=/\w{2}-\w{2}/});var q=I(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.VOLUME=g.RATE=g.PITCH=g.OUTPUT_FORMAT=g.ProsodyOptions=g.EdgeTTSClient=void 0;var te=_();Object.defineProperty(g,"EdgeTTSClient",{enumerable:!0,get:function(){return te.EdgeTTSClient}});var se=_();Object.defineProperty(g,"ProsodyOptions",{enumerable:!0,get:function(){return se.ProsodyOptions}});var E=A();Object.defineProperty(g,"OUTPUT_FORMAT",{enumerable:!0,get:function(){return E.OUTPUT_FORMAT}});Object.defineProperty(g,"PITCH",{enumerable:!0,get:function(){return E.PITCH}});Object.defineProperty(g,"RATE",{enumerable:!0,get:function(){return E.RATE}});Object.defineProperty(g,"VOLUME",{enumerable:!0,get:function(){return E.VOLUME}})});var le={};Y(le,{default:()=>N});module.exports=Z(le);var o=require("obsidian"),S=x(q());function B(i){let s=/^(---|\.\.\.)([\s\S]*?)\1\n?/;return i.replace(s,"").trim()}function ne(i){return i.replace(/>=/g,"\u2265").replace(/<=/g,"\u2264")}function ie(i){return i.replace(/&/g,"&amp;")}function ae(i){return i.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function O(i,s=!1){let a=i.replace(/^-{3}[\s\S]*?-{3}\n?/,"").replace(/https?:\/\/[^\s]+/g,"").replace(/```[\s\S]*?```/g,"").replace(/^( {4}|\t).+/gm,"").replace(/(\*\*|__)(.*?)\1/g,"$2").replace(/(\*|_)(.*?)\1/g,"$2").replace(/`([^`]*)`/g,"$1").replace(/~~(.*?)~~/g,"$1").replace(/^[#*-]+\s*/gm,"").replace(/^[\-\+\*]\s+/gm,"").replace(/^\d+\.\s+/gm,"").replace(/^>\s+/gm,"").replace(/^[-*]{3,}\s*$/gm,"");return a=ne(a),a=a.replace(/<([^>\s]+)[^>]*>/g,""),a=s?a.trim():ie(a.trim()),ae(a)}var v=x(require("path")),H=x(require("os")),oe=["en-US-AvaMultilingualNeural","en-US-BrianMultilingualNeural","en-US-AndrewNeural","en-US-AriaNeural","en-US-AvaNeural","en-US-ChristopherNeural","en-US-SteffanNeural","en-IE-ConnorNeural","en-GB-RyanNeural","en-GB-SoniaNeural","en-AU-NatashaNeural","en-AU-WilliamNeural"],re={selectedVoice:"en-US-AvaNeural",customVoice:"",playbackSpeed:1,showNotices:!0,showStatusBarButton:!0,showMenuItems:!0,generateMP3:!1,outputFolder:"Note Narration Audio",embedInNote:!1,replaceSpacesInFilenames:!1,overrideAmpersandEscape:!1},j="note",N=class extends o.Plugin{constructor(){super(...arguments);this.ribbonIconEl=null;this.statusBarEl=null;this.audioContext=null;this.audioSource=null;this.isPaused=!1;this.pausedAt=0}async onload(){await this.loadSettings(),this.addSettingTab(new F(this.app,this)),this.addPluginRibbonIcon(),this.settings.showStatusBarButton&&this.initializeStatusBar(),this.settings.showMenuItems&&this.addPluginMenuItems(),this.addCommand({id:"read-note-aloud",name:"Read note aloud",editorCallback:(e,t)=>{this.readNoteAloud(e,t)}})}initializeStatusBar(){this.statusBarEl=this.addStatusBarItem(),this.updateStatusBar()}removeStatusBarButton(){var e;this.statusBarEl&&((e=this.statusBarEl)==null||e.remove(),this.statusBarEl=null)}updateStatusBar(e=!1){if(this.statusBarEl){if(!this.settings.showStatusBarButton){this.removeStatusBarButton();return}if(this.statusBarEl.empty(),e){let t=createEl("span",{cls:"edge-tts-status-bar-control"});(0,o.setTooltip)(t,this.isPaused?"Resume":"Pause",{placement:"top"}),(0,o.setIcon)(t,this.isPaused?"circle-play":"circle-pause"),t.onclick=()=>this.isPaused?this.resumePlayback():this.pausePlayback(),this.statusBarEl.appendChild(t)}else{let t=createEl("span",{cls:"edge-tts-status-bar-control"});(0,o.setTooltip)(t,"Read note aloud",{placement:"top"}),(0,o.setIcon)(t,"audio-lines"),t.onclick=()=>this.readNoteAloud(),this.statusBarEl.appendChild(t)}}}addPluginMenuItems(){this.registerEvent(this.app.workspace.on("file-menu",(e,t)=>{e.addItem(n=>{n.setTitle("Read note aloud").setIcon("audio-lines").onClick(async()=>{this.readNoteAloud(void 0,void 0,t.path)})}),this.settings.generateMP3&&e.addItem(n=>{n.setTitle("Generate MP3").setIcon("microphone").onClick(async()=>{await this.generateMP3(void 0,void 0,t.path)})})})),this.registerEvent(this.app.workspace.on("editor-menu",(e,t,n)=>{e.addItem(a=>{a.setTitle("Read note aloud").setIcon("audio-lines").onClick(async()=>{this.readNoteAloud(t,n)})}),this.settings.generateMP3&&e.addItem(a=>{a.setTitle("Generate MP3").setIcon("microphone").onClick(async()=>{await this.generateMP3(t,n)})})}))}addPluginRibbonIcon(){this.ribbonIconEl&&this.ribbonIconEl.remove(),this.ribbonIconEl=this.addRibbonIcon("audio-lines","Read note aloud",()=>{this.readNoteAloud()})}removePluginRibbonIcon(){this.ribbonIconEl&&(this.ribbonIconEl.remove(),this.ribbonIconEl=null)}async extractFileContent(e){let t=this.app.vault.getAbstractFileByPath(e);if(t instanceof o.TFile)try{return await this.app.vault.read(t)}catch(n){return console.error("Error reading file content:",n),null}else return console.warn("The specified file is not a TFile (markdown file)."),null}async embedMP3InNote(e,t,n){try{if(n){let a=n.getSelection(),u=n.getCursor("to"),c=`

![[${e}]]
`;a?n.replaceSelection(`${a}${c}`):n.replaceRange(c,u),this.settings.showNotices&&new o.Notice("MP3 embedded after the selected text.")}else{if(!t){console.error("Error embedding MP3 in note due to filePath and editor not being passed to embedMP3InNote"),this.settings.showNotices&&new o.Notice("Failed to embed MP3 in note.");return}let a=this.app.vault.getAbstractFileByPath(t);if(!(a instanceof o.TFile)){this.settings.showNotices&&new o.Notice(`File not found or is not a valid markdown file: ${t}`);return}let u=await this.app.vault.read(a),c=`![[${e}]]`,d=`${u}

${c}`;await this.app.vault.modify(a,d),this.settings.showNotices&&new o.Notice("MP3 embedded in note.")}}catch(a){console.error("Error embedding MP3 in note:",a),this.settings.showNotices&&new o.Notice("Failed to embed MP3 in note.")}}async saveMP3File(e,t){let n=this.app.vault.adapter;if(!(n instanceof o.FileSystemAdapter))return console.error("File system adapter not available."),this.settings.showNotices&&new o.Notice("Unable to save MP3 file."),null;let a=n.getBasePath(),u=this.settings.replaceSpacesInFilenames?"Note_Narration_Audio":"Note Narration Audio",d=this.settings.outputFolder||u,r=v.join(a,d);try{await n.exists(d)||await n.mkdir(d);let l=new Date,p=new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).format(l).replace(/,/g,"").trim();H.platform()==="win32"&&(p=p.replace(/:/g,"-"));let w=t&&v.basename(t,".md")||j;this.settings.replaceSpacesInFilenames&&(w=w.replace(/\s+/g,"_"),p=p.replace(/\s+/g,"_"));let y=this.settings.replaceSpacesInFilenames?`${w}_-_${p}.mp3`:`${w} - ${p}.mp3`,M=v.join(d,y),G=v.join(r,y);return await n.write(M,""),await n.writeBinary(M,e),this.settings.showNotices&&new o.Notice(`MP3 saved to: ${G}`),M}catch(l){return console.error("Error saving MP3:",l),this.settings.showNotices&&new o.Notice("Failed to save MP3 file."),null}}async generateMP3(e,t,n){let a="",u="";if(n){let c=await this.extractFileContent(n);if(c)a=c;else{this.settings.showNotices&&new o.Notice("Failed to generate MP3: could not read file.");return}}else{let c=t!=null?t:this.app.workspace.getActiveViewOfType(o.MarkdownView);!e&&c&&(e=c.editor),e&&c&&(a=e.getSelection()||e.getValue())}if(a.trim())if(u=O(B(a),this.settings.overrideAmpersandEscape),u.trim())try{this.settings.showNotices&&new o.Notice("Generating MP3...");let c=new S.EdgeTTSClient,d=this.settings.customVoice.trim()||this.settings.selectedVoice;await c.setMetadata(d,S.OUTPUT_FORMAT.AUDIO_24KHZ_48KBITRATE_MONO_MP3);let r=[],l=c.toStream(u);l.on("data",f=>r.push(f)),l.on("end",async()=>{let f=Buffer.concat(r),p=await this.saveMP3File(f,n);p&&this.settings.embedInNote&&await this.embedMP3InNote(p,n,e)})}catch(c){console.error("Error generating MP3:",c),this.settings.showNotices&&new o.Notice("Failed to generate MP3.")}else this.settings.showNotices&&new o.Notice("No readable text after filtering.");else this.settings.showNotices&&new o.Notice("No text selected or available.")}async readNoteAloud(e,t,n){(this.audioContext||this.audioSource)&&this.stopPlayback();let a="",u="",c=null;if(n)if(c=await this.extractFileContent(n),c)a=c;else{this.settings.showNotices&&new o.Notice("Failed to read note aloud.");return}else{let d=t!=null?t:this.app.workspace.getActiveViewOfType(o.MarkdownView);!e&&d&&(e=d.editor),e&&d&&(a=e.getSelection()||e.getValue())}if(a.trim())if(u=O(B(a),this.settings.overrideAmpersandEscape),u.trim())try{this.settings.showNotices&&new o.Notice("Processing text-to-speech..."),this.updateStatusBar(!0);let d=new S.EdgeTTSClient,r=this.settings.customVoice.trim()||this.settings.selectedVoice;await d.setMetadata(r,S.OUTPUT_FORMAT.WEBM_24KHZ_16BIT_MONO_OPUS);let l=new S.ProsodyOptions;l.rate=this.settings.playbackSpeed;let f=d.toStream(u,l);this.audioContext=new AudioContext,this.audioSource=this.audioContext.createBufferSource();let p=[];f.on("data",w=>{p.push(w)}),f.on("end",async()=>{let w=new Uint8Array(Buffer.concat(p)),y=await this.audioContext.decodeAudioData(w.buffer);this.audioSource.buffer=y,this.audioSource.connect(this.audioContext.destination),this.audioSource.start(0),this.audioSource.onended=()=>{this.cleanupAudioContext(),this.updateStatusBar(),this.settings.showNotices&&new o.Notice("Finished reading aloud.")}})}catch(d){console.error("Error reading note aloud:",d),this.updateStatusBar(),this.settings.showNotices&&new o.Notice("Failed to read note aloud.")}else this.settings.showNotices&&new o.Notice("No readable text after filtering.");else this.settings.showNotices&&new o.Notice("No text selected or available.")}pausePlayback(){this.audioContext&&this.audioSource&&(this.isPaused=!0,this.pausedAt=this.audioContext.currentTime,this.audioContext.suspend(),this.updateStatusBar(!0))}resumePlayback(){this.audioContext&&(this.isPaused=!1,this.audioContext.resume(),this.updateStatusBar(!0))}stopPlayback(){this.audioSource&&(this.audioSource.stop(),this.cleanupAudioContext(),this.updateStatusBar())}cleanupAudioContext(){this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.audioSource=null,this.isPaused=!1,this.pausedAt=0}async loadSettings(){this.settings=Object.assign({},re,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}onunload(){var e;console.log("Unloading Obsidian Edge TTS Plugin"),this.removePluginRibbonIcon(),this.cleanupAudioContext(),(e=this.statusBarEl)==null||e.remove()}},F=class extends o.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}async display(){let{containerEl:e}=this;e.empty();let t=e.createEl("div",{cls:"edge-tts-info-div"}),n=document.createElement("p"),a=document.createElement("a");a.href="https://tts.travisvn.com",a.text="tts.travisvn.com",n.append("You can sample available voices at "),n.append(a),t.appendChild(n),new o.Setting(e).setName("Select voice").setDesc("Choose from the top voices.").setClass("default-style").addDropdown(r=>{oe.forEach(l=>{r.addOption(l,l)}),r.setValue(this.plugin.settings.selectedVoice),r.onChange(async l=>{this.plugin.settings.selectedVoice=l,await this.plugin.saveSettings()})});let u=document.createDocumentFragment(),c=document.createElement("a");c.href="https://tts.travisvn.com",c.text="tts.travisvn.com",u.append("(OPTIONAL) Enter custom voice. Visit "),u.append(c),u.append(" for list of options. "),u.append("Leave empty to use the selected voice above."),new o.Setting(e).setName("Custom voice").setDesc(u).addText(r=>{r.setPlaceholder("e.g., fr-FR-HenriNeural"),r.setValue(this.plugin.settings.customVoice),r.onChange(async l=>{this.plugin.settings.customVoice=l,await this.plugin.saveSettings()})}),new o.Setting(e).setName("Playback speed").setDesc("Change playback speed multiplier (ex. 0.5 = 0.5x playback speed (50% speed)). Default = 1.2").addSlider(r=>{r.setLimits(.5,2,.1),r.setValue(this.plugin.settings.playbackSpeed),r.onChange(async l=>{this.plugin.settings.playbackSpeed=l,await this.plugin.saveSettings()}),r.setDynamicTooltip(),r.showTooltip()}),new o.Setting(e).setName("Show notices").setDesc("Toggle notices for processing status and errors.").addToggle(r=>{r.setValue(this.plugin.settings.showNotices),r.onChange(async l=>{this.plugin.settings.showNotices=l,await this.plugin.saveSettings()})}),new o.Setting(e).setName("Show status bar button").setDesc("Toggle playback button in the status bar.").addToggle(r=>{r.setValue(this.plugin.settings.showStatusBarButton),r.onChange(async l=>{this.plugin.settings.showStatusBarButton=l,await this.plugin.saveSettings(),l?this.plugin.initializeStatusBar():this.plugin.removeStatusBarButton()})}),new o.Setting(e).setName("Show file and editor menu items").setDesc("Toggle menu items in the file and editor menus.").addToggle(r=>{r.setValue(this.plugin.settings.showMenuItems),r.onChange(async l=>{this.plugin.settings.showMenuItems=l,await this.plugin.saveSettings(),l?this.plugin.addPluginMenuItems():new o.Notice("Menu items will be removed after the next reload.")})}),e.createEl("h3",{text:"Saving .mp3 of narration"}),new o.Setting(e).setName("Generate MP3 file").setDesc('Enable option to select "Generate MP3" in the file and editor menus.').addToggle(r=>{r.setValue(this.plugin.settings.generateMP3),r.onChange(async l=>{this.plugin.settings.generateMP3=l,await this.plugin.saveSettings(),l||new o.Notice("Menu items will be removed after the next reload.")})}),new o.Setting(e).setName("Output folder").setDesc("Specify the folder to save generated MP3 files.").addText(r=>{r.setPlaceholder("e.g., Note Narration Audio").setValue(this.plugin.settings.outputFolder).onChange(async l=>{this.plugin.settings.outputFolder=l.trim(),await this.plugin.saveSettings()})}),new o.Setting(e).setName("Embed MP3 in note").setDesc("Embed a link to the generated MP3 file in the note.").addToggle(r=>{r.setValue(this.plugin.settings.embedInNote),r.onChange(async l=>{this.plugin.settings.embedInNote=l,await this.plugin.saveSettings()})}),new o.Setting(e).setName("Replace spaces in filenames").setDesc("Replaces spaces in mp3 file name with underscores (used for system compatibility).").addToggle(r=>{r.setValue(this.plugin.settings.replaceSpacesInFilenames),r.onChange(async l=>{this.plugin.settings.replaceSpacesInFilenames=l,await this.plugin.saveSettings()})});let d=e.createEl("div",{cls:"edge-tts-star-section"});d.createEl("p",{text:"Please star this project on GitHub if you find it useful \u2B50\uFE0F",cls:"edge-tts-star-message"}),d.createEl("a",{text:"GitHub: Edge TTS Plugin",href:"https://github.com/travisvn/obsidian-edge-tts",cls:"external-link",attr:{target:"_blank",rel:"noopener"}}),e.createEl("h3",{text:"Extra Settings"}),new o.Setting(e).setName("Override ampersand (&) escaping").setDesc('If an ampersand (&) is by itself, we "escape it" for the API call. This override is an option for rare use cases.').addToggle(r=>{r.setValue(this.plugin.settings.overrideAmpersandEscape),r.onChange(async l=>{this.plugin.settings.overrideAmpersandEscape=l,await this.plugin.saveSettings()})})}};

/* nosourcemap */